
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Veering triangulation demo &#8212; veerer  documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/classic.css" />
    
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Ferenczi-Zamboni induction" href="ferenczi_zamboni.html" />
    <link rel="prev" title="Veering triangulations" href="background.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="ferenczi_zamboni.html" title="Ferenczi-Zamboni induction"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="background.html" title="Veering triangulations"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">veerer  documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Veering triangulation demo</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="veering-triangulation-demo">
<h1>Veering triangulation demo<a class="headerlink" href="#veering-triangulation-demo" title="Permalink to this heading">¶</a></h1>
<dl class="field-list simple">
<dt class="field-odd">Authors<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p>Vincent Delecroix</p></li>
<li><p>Saul Schleimer</p></li>
</ul>
</dd>
<dt class="field-even">License<span class="colon">:</span></dt>
<dd class="field-even"><p>CC BY-NC-SA 3.0</p>
</dd>
</dl>
<ul class="simple">
<li><p>27 Aug. 2018 Toronto</p></li>
<li><p>20 Sept. 2018 Temple</p></li>
<li><p>25 Sept. 2018 Villetaneuse and CUNY</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">veerer</span></code> is a Python and SageMath library for exploration of veering
triangulations. It is written by
<a class="reference external" href="https://markcbell.github.io">Mark Bell</a>,
<a class="reference external" href="http://www.labri.fr/perso/vdelecro/">Vincent Delecroix</a> and
<a class="reference external" href="http://homepages.warwick.ac.uk/~masgar/">Saul Schleimer</a>. It is
part of a project that also involve
<a class="reference external" href="http://www.maths.gla.ac.uk/~vgadre/">Vaibhav Gadre</a> and
<a class="reference external" href="http://rodol.fo">Rodolfo Gutiérrez-Romo</a>, see
<a class="reference external" href="https://arxiv.org/abs/1909.00890">arXiv:1909.00890 [math.DS]</a>.</p>
<p><code class="docutils literal notranslate"><span class="pre">veerer</span></code> works in conjunction with</p>
<ul class="simple">
<li><p>the Python library <a class="reference external" href="https://pypi.org/project/pplpy/">pplpy</a> (rational
polytope computations and linear optimiation). Note that it is shipped
with SageMath (see below).</p></li>
<li><p>The Python library <a class="reference external" href="https://pypi.org/project/PyNormaliz/">PyNormaliz</a>
(polytope, in particular over number fields).</p></li>
<li><p>The software <a class="reference external" href="https://www.sagemath.org/">SageMath</a> (plotting, linear algebra
and many other things)</p></li>
<li><p>The SageMath library <a class="reference external" href="https://pypi.org/project/surface-dynamics/">surface_dynamics</a> (for analyzing stratum
components)</p></li>
</ul>
<p>To import all features from veerer one usually starts with the following
lines:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sage</span><span class="p">:</span> <span class="kn">from</span> <span class="nn">veerer</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">sage</span><span class="p">:</span> <span class="kn">from</span> <span class="nn">surface_dynamics</span> <span class="kn">import</span> <span class="o">*</span>   <span class="c1"># optional - surface_dynamics</span>
</pre></div>
</div>
<p>To input a triangulation in the program one needs to specify a list of
triangles <code class="docutils literal notranslate"><span class="pre">(i,</span> <span class="pre">j,</span> <span class="pre">k)</span></code> and the pairing of edges is by convention given
by <code class="docutils literal notranslate"><span class="pre">i</span> <span class="pre">&lt;-&gt;</span> <span class="pre">~i</span></code>. The veering coloring is then specified by a list of
colors.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sage</span><span class="p">:</span> <span class="c1"># standard torus made of two triangles</span>
<span class="n">sage</span><span class="p">:</span> <span class="n">faces0</span> <span class="o">=</span> <span class="s1">&#39;(0,1,2)(~0,~1,~2)&#39;</span>
<span class="n">sage</span><span class="p">:</span> <span class="n">colours0</span> <span class="o">=</span> <span class="s1">&#39;RRB&#39;</span>
<span class="n">sage</span><span class="p">:</span> <span class="n">T0</span> <span class="o">=</span> <span class="n">VeeringTriangulation</span><span class="p">(</span><span class="n">faces0</span><span class="p">,</span> <span class="n">colours0</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sage</span><span class="p">:</span> <span class="n">T0</span><span class="o">.</span><span class="n">genus</span><span class="p">()</span>
<span class="mi">1</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sage</span><span class="p">:</span> <span class="n">T0</span><span class="o">.</span><span class="n">angles</span><span class="p">()</span>
<span class="p">[</span><span class="mi">2</span><span class="p">]</span>
<span class="n">sage</span><span class="p">:</span> <span class="n">T0</span><span class="o">.</span><span class="n">stratum</span><span class="p">()</span>  <span class="c1"># optional - surface_dynamics</span>
<span class="n">H_1</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sage</span><span class="p">:</span> <span class="c1"># triangulation is core if it carries some flat structure</span>
<span class="n">sage</span><span class="p">:</span> <span class="n">T0</span><span class="o">.</span><span class="n">is_core</span><span class="p">()</span>
<span class="kc">True</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sage</span><span class="p">:</span> <span class="n">FS0</span> <span class="o">=</span> <span class="n">T0</span><span class="o">.</span><span class="n">flat_structure_min</span><span class="p">()</span>
<span class="n">sage</span><span class="p">:</span> <span class="n">FS0</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sage</span><span class="p">:</span> <span class="n">FFS0</span> <span class="o">=</span> <span class="n">T0</span><span class="o">.</span><span class="n">flat_structure_geometric_middle</span><span class="p">()</span>
<span class="n">sage</span><span class="p">:</span> <span class="n">FFS0</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sage</span><span class="p">:</span> <span class="c1"># an Abelian genus 2 example</span>
<span class="n">sage</span><span class="p">:</span> <span class="n">faces1</span> <span class="o">=</span> <span class="s1">&#39;(0, ~3, 4)(1, 2, ~7)(3, ~1, ~2)(5, ~8, ~4)(6, ~5, 8)(7, ~6, ~0)&#39;</span>
<span class="n">sage</span><span class="p">:</span> <span class="n">colours1</span> <span class="o">=</span> <span class="s1">&#39;RBRRBRBRB&#39;</span>
<span class="n">sage</span><span class="p">:</span> <span class="n">T1</span> <span class="o">=</span> <span class="n">VeeringTriangulation</span><span class="p">(</span><span class="n">faces1</span><span class="p">,</span> <span class="n">colours1</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sage</span><span class="p">:</span> <span class="n">T1</span><span class="o">.</span><span class="n">angles</span><span class="p">()</span>
<span class="p">[</span><span class="mi">6</span><span class="p">]</span>
<span class="n">sage</span><span class="p">:</span> <span class="n">T1</span><span class="o">.</span><span class="n">stratum</span><span class="p">()</span>  <span class="c1"># optional - surface_dynamics</span>
<span class="n">H_2</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sage</span><span class="p">:</span> <span class="n">FS1</span> <span class="o">=</span> <span class="n">T1</span><span class="o">.</span><span class="n">flat_structure_min</span><span class="p">()</span>
<span class="n">sage</span><span class="p">:</span> <span class="n">FS1</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sage</span><span class="p">:</span> <span class="n">FFS1</span> <span class="o">=</span> <span class="n">T1</span><span class="o">.</span><span class="n">flat_structure_geometric_middle</span><span class="p">()</span>
<span class="n">sage</span><span class="p">:</span> <span class="n">FFS1</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sage</span><span class="p">:</span> <span class="c1"># a quadratic genus 1 example</span>
<span class="n">sage</span><span class="p">:</span> <span class="n">faces2</span> <span class="o">=</span> <span class="s1">&#39;(0,1,2)(~0,~3,~8)(3,5,4)(~4,~1,~5)(6,7,8)(~6,9,~2)&#39;</span>
<span class="n">sage</span><span class="p">:</span> <span class="n">colours2</span> <span class="o">=</span> <span class="s1">&#39;BRBRBBBRBR&#39;</span>
<span class="n">sage</span><span class="p">:</span> <span class="n">T2</span> <span class="o">=</span> <span class="n">VeeringTriangulation</span><span class="p">(</span><span class="n">faces2</span><span class="p">,</span> <span class="n">colours2</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sage</span><span class="p">:</span> <span class="n">T2</span><span class="o">.</span><span class="n">angles</span><span class="p">()</span>
<span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="n">sage</span><span class="p">:</span> <span class="n">T2</span><span class="o">.</span><span class="n">stratum</span><span class="p">()</span>  <span class="c1"># optional - surface_dynamics</span>
<span class="n">Q_1</span><span class="p">(</span><span class="mi">1</span><span class="o">^</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">^</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sage</span><span class="p">:</span> <span class="n">FS2</span> <span class="o">=</span> <span class="n">T2</span><span class="o">.</span><span class="n">flat_structure_min</span><span class="p">()</span>
<span class="n">sage</span><span class="p">:</span> <span class="n">FS2</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>  <span class="c1"># not tested (warning from matplotlib)</span>
</pre></div>
</div>
<section id="viewing-train-tracks">
<h2>Viewing train-tracks!<a class="headerlink" href="#viewing-train-tracks" title="Permalink to this heading">¶</a></h2>
<p>Recall that a veering triangulation is just a pair of transversal
train-tracks.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sage</span><span class="p">:</span> <span class="n">TT_horiz</span> <span class="o">=</span> <span class="n">FS1</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">horizontal_train_track</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">edge_labels</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">sage</span><span class="p">:</span> <span class="n">TT_vert</span> <span class="o">=</span> <span class="n">FS1</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">vertical_train_track</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">edge_labels</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">sage</span><span class="p">:</span> <span class="n">graphics_array</span><span class="p">([</span><span class="n">TT_horiz</span><span class="p">,</span> <span class="n">TT_vert</span><span class="p">],</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sage</span><span class="p">:</span> <span class="c1"># constructing veering triangulations from a component stratum</span>
<span class="n">sage</span><span class="p">:</span> <span class="n">Q</span> <span class="o">=</span> <span class="n">QuadraticStratum</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>     <span class="c1"># optional - surface_dynamics</span>
<span class="n">sage</span><span class="p">:</span> <span class="n">Qreg</span> <span class="o">=</span> <span class="n">Q</span><span class="o">.</span><span class="n">regular_component</span><span class="p">()</span>      <span class="c1"># optional - surface_dynamics</span>
<span class="n">sage</span><span class="p">:</span> <span class="n">Qirr</span> <span class="o">=</span> <span class="n">Q</span><span class="o">.</span><span class="n">irregular_component</span><span class="p">()</span>    <span class="c1"># optional - surface_dynamics</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sage</span><span class="p">:</span> <span class="n">VeeringTriangulation</span><span class="o">.</span><span class="n">from_stratum</span><span class="p">(</span><span class="n">Qreg</span><span class="p">)</span>    <span class="c1"># optional - surface_dynamics</span>
<span class="n">VeeringTriangulation</span><span class="p">(</span><span class="s2">&quot;(0,19,~18)(1,20,~19)(2,21,~20)(3,22,~21)(4,23,~22)(5,25,~24)(6,27,~26)(7,28,~27)(8,29,~28)(9,~16,17)(10,~5,~29)(11,~6,~10)(12,~1,~11)(13,~9,~12)(14,~7,~13)(15,~2,~14)(16,~0,~15)(18,~8,~17)(24,~23,~3)(26,~25,~4)&quot;</span><span class="p">,</span> <span class="s2">&quot;RRRRRRRRRRBBBBBBBBBBBBBBBBBBBB&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sage</span><span class="p">:</span> <span class="n">VeeringTriangulation</span><span class="o">.</span><span class="n">from_stratum</span><span class="p">(</span><span class="n">Qirr</span><span class="p">)</span>   <span class="c1"># optional - surface_dynamics</span>
<span class="n">VeeringTriangulation</span><span class="p">(</span><span class="s2">&quot;(0,21,~20)(1,22,~21)(2,23,~22)(3,24,~23)(4,25,~24)(5,26,~25)(6,28,~27)(7,29,~28)(8,~16,17)(9,~14,15)(10,~2,~29)(11,~1,~10)(12,~6,~11)(13,~9,~12)(14,~8,~13)(16,~4,~15)(18,~5,~17)(19,~3,~18)(20,~7,~19)(27,~26,~0)&quot;</span><span class="p">,</span> <span class="s2">&quot;RRRRRRRRRRBBBBBBBBBBBBBBBBBBBB&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sage</span><span class="p">:</span> <span class="c1"># constructing a veering triangulation from a pseudo-Anosov homeomorphism</span>
<span class="n">sage</span><span class="p">:</span> <span class="kn">import</span> <span class="nn">flipper</span>                    <span class="c1"># optional - flipper</span>
<span class="n">sage</span><span class="p">:</span> <span class="n">S_2_1</span> <span class="o">=</span> <span class="n">flipper</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;S_2_1&#39;</span><span class="p">)</span>     <span class="c1"># optional - flipper</span>
<span class="n">sage</span><span class="p">:</span> <span class="n">h</span> <span class="o">=</span> <span class="n">S_2_1</span><span class="o">.</span><span class="n">mapping_class</span><span class="p">(</span><span class="s1">&#39;abcD&#39;</span><span class="p">)</span>   <span class="c1"># optional - flipper</span>
<span class="n">sage</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="n">h</span><span class="o">.</span><span class="n">nielsen_thurston_type</span><span class="p">())</span>  <span class="c1"># optional - flipper</span>
<span class="n">Pseudo</span><span class="o">-</span><span class="n">Anosov</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sage</span><span class="p">:</span> <span class="n">VeeringTriangulation</span><span class="o">.</span><span class="n">from_pseudo_anosov</span><span class="p">(</span><span class="n">h</span><span class="p">)</span>  <span class="c1"># optional - flipper</span>
<span class="n">VeeringTriangulation</span><span class="p">(</span><span class="s2">&quot;(0,~3,~1)(1,2,14)(3,~5,~13)(4,~12,~8)(5,6,~11)(7,8,13)(9,~6,~7)(10,~0,11)(12,~14,~10)(~9,~4,~2)&quot;</span><span class="p">,</span> <span class="s2">&quot;RBRBRRBRBBBBRBR&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="core-vs-not-core">
<h2>Core vs not core<a class="headerlink" href="#core-vs-not-core" title="Permalink to this heading">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sage</span><span class="p">:</span> <span class="c1"># start from our surface in H(2) and let us flip some edges</span>
<span class="n">sage</span><span class="p">:</span> <span class="n">S</span> <span class="o">=</span> <span class="n">T1</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">mutable</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">sage</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="n">S</span><span class="o">.</span><span class="n">is_core</span><span class="p">())</span>
<span class="kc">True</span>
<span class="n">sage</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="n">S</span><span class="o">.</span><span class="n">flippable_edges</span><span class="p">())</span>
<span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sage</span><span class="p">:</span> <span class="n">S</span><span class="o">.</span><span class="n">flip</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">BLUE</span><span class="p">)</span>
<span class="n">sage</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="n">S</span><span class="o">.</span><span class="n">is_core</span><span class="p">())</span>
<span class="kc">True</span>
<span class="n">sage</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="n">S</span><span class="o">.</span><span class="n">flippable_edges</span><span class="p">())</span>
<span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sage</span><span class="p">:</span> <span class="n">S</span><span class="o">.</span><span class="n">flip</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="n">BLUE</span><span class="p">)</span>
<span class="n">sage</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="n">S</span><span class="o">.</span><span class="n">is_core</span><span class="p">())</span>
<span class="kc">True</span>
<span class="n">sage</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="n">S</span><span class="o">.</span><span class="n">flippable_edges</span><span class="p">())</span>
<span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sage</span><span class="p">:</span> <span class="n">S</span><span class="o">.</span><span class="n">flip</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="n">RED</span><span class="p">)</span>
<span class="n">sage</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="n">S</span><span class="o">.</span><span class="n">is_core</span><span class="p">())</span>
<span class="kc">True</span>
<span class="n">sage</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="n">S</span><span class="o">.</span><span class="n">flippable_edges</span><span class="p">())</span>
<span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sage</span><span class="p">:</span> <span class="n">FS</span> <span class="o">=</span> <span class="n">S</span><span class="o">.</span><span class="n">flat_structure_min</span><span class="p">()</span>
<span class="n">sage</span><span class="p">:</span> <span class="n">FS</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="n">Graphics</span> <span class="nb">object</span> <span class="n">consisting</span> <span class="n">of</span> <span class="mi">37</span> <span class="n">graphics</span> <span class="n">primitives</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sage</span><span class="p">:</span> <span class="c1"># in the geometric setting, the flipped edge is forced to be BLUE</span>
<span class="n">sage</span><span class="p">:</span> <span class="n">S</span><span class="o">.</span><span class="n">flip</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="n">RED</span><span class="p">)</span>
<span class="n">sage</span><span class="p">:</span> <span class="n">S</span><span class="o">.</span><span class="n">is_core</span><span class="p">()</span>
<span class="kc">False</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sage</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="n">S</span><span class="o">.</span><span class="n">train_track_polytope</span><span class="p">(</span><span class="n">HORIZONTAL</span><span class="p">))</span>
<span class="n">Cone</span> <span class="n">of</span> <span class="n">dimension</span> <span class="mi">4</span> <span class="ow">in</span> <span class="n">ambient</span> <span class="n">dimension</span> <span class="mi">9</span> <span class="n">made</span> <span class="n">of</span> <span class="mi">5</span> <span class="n">facets</span> <span class="p">(</span><span class="n">backend</span><span class="o">=</span><span class="n">ppl</span><span class="p">)</span>
<span class="n">sage</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="n">S</span><span class="o">.</span><span class="n">train_track_polytope</span><span class="p">(</span><span class="n">VERTICAL</span><span class="p">))</span>
<span class="n">Cone</span> <span class="n">of</span> <span class="n">dimension</span> <span class="mi">3</span> <span class="ow">in</span> <span class="n">ambient</span> <span class="n">dimension</span> <span class="mi">9</span> <span class="n">made</span> <span class="n">of</span> <span class="mi">3</span> <span class="n">facets</span> <span class="p">(</span><span class="n">backend</span><span class="o">=</span><span class="n">ppl</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sage</span><span class="p">:</span> <span class="c1"># check that we indeed started with a core veering triangulation</span>
<span class="n">sage</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="n">T1</span><span class="o">.</span><span class="n">train_track_polytope</span><span class="p">(</span><span class="n">HORIZONTAL</span><span class="p">))</span>
<span class="n">Cone</span> <span class="n">of</span> <span class="n">dimension</span> <span class="mi">4</span> <span class="ow">in</span> <span class="n">ambient</span> <span class="n">dimension</span> <span class="mi">9</span> <span class="n">made</span> <span class="n">of</span> <span class="mi">4</span> <span class="n">facets</span> <span class="p">(</span><span class="n">backend</span><span class="o">=</span><span class="n">ppl</span><span class="p">)</span>
<span class="n">sage</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="n">T1</span><span class="o">.</span><span class="n">train_track_polytope</span><span class="p">(</span><span class="n">VERTICAL</span><span class="p">))</span>
<span class="n">Cone</span> <span class="n">of</span> <span class="n">dimension</span> <span class="mi">4</span> <span class="ow">in</span> <span class="n">ambient</span> <span class="n">dimension</span> <span class="mi">9</span> <span class="n">made</span> <span class="n">of</span> <span class="mi">5</span> <span class="n">facets</span> <span class="p">(</span><span class="n">backend</span><span class="o">=</span><span class="n">ppl</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="geometric-polytope">
<h2>Geometric polytope<a class="headerlink" href="#geometric-polytope" title="Permalink to this heading">¶</a></h2>
<p>A triangulation is <em>geometric</em> if it is the L^infinity-Delaunay triangulation of
some flat structure</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sage</span><span class="p">:</span> <span class="c1"># triangulation of some flat structure</span>
<span class="n">sage</span><span class="p">:</span> <span class="n">T0</span><span class="o">.</span><span class="n">is_geometric</span><span class="p">()</span>
<span class="kc">True</span>
</pre></div>
</div>
<p>The geometric polytope that parametrizes the geometric vectors is a sub-polytope
of the product of the two train-track polytopes.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sage</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="n">T1</span><span class="o">.</span><span class="n">is_geometric</span><span class="p">())</span>
<span class="kc">True</span>
<span class="n">sage</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="n">T1</span><span class="o">.</span><span class="n">geometric_polytope</span><span class="p">())</span>
<span class="n">Cone</span> <span class="n">of</span> <span class="n">dimension</span> <span class="mi">8</span> <span class="ow">in</span> <span class="n">ambient</span> <span class="n">dimension</span> <span class="mi">18</span> <span class="n">made</span> <span class="n">of</span> <span class="mi">13</span> <span class="n">facets</span> <span class="p">(</span><span class="n">backend</span><span class="o">=</span><span class="n">ppl</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="core-automaton">
<h2>Core automaton<a class="headerlink" href="#core-automaton" title="Permalink to this heading">¶</a></h2>
<p>The core automaton of a given triangulations <cite>T_0</cite> is the directed graph whose
vertices are core veering triangulations that can be reached from <cite>T_0</cite> by a
sequence of flips and there is a directed edge <cite>T_i to T_j</cite> if <cite>T_j</cite> is obtained
from <cite>T_i</cite> by a flip.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sage</span><span class="p">:</span> <span class="c1"># T0 was the torus example</span>
<span class="n">sage</span><span class="p">:</span> <span class="kn">from</span> <span class="nn">veerer</span> <span class="kn">import</span> <span class="n">CoreAutomaton</span>
<span class="n">sage</span><span class="p">:</span> <span class="n">A0</span> <span class="o">=</span> <span class="n">CoreAutomaton</span><span class="p">(</span><span class="n">T0</span><span class="p">)</span>
<span class="n">sage</span><span class="p">:</span> <span class="n">A0</span>
<span class="n">Core</span> <span class="n">veering</span> <span class="n">automaton</span> <span class="k">with</span> <span class="mi">2</span> <span class="n">vertices</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sage</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="n">A0</span><span class="o">.</span><span class="n">num_states</span><span class="p">(),</span> <span class="n">A0</span><span class="o">.</span><span class="n">num_transitions</span><span class="p">())</span>
<span class="mi">2</span> <span class="mi">4</span>
<span class="n">sage</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="n">vt</span><span class="o">.</span><span class="n">is_geometric</span><span class="p">()</span> <span class="k">for</span> <span class="n">vt</span> <span class="ow">in</span> <span class="n">A0</span><span class="p">))</span>
<span class="mi">2</span>
<span class="n">sage</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="n">vt</span><span class="o">.</span><span class="n">is_cylindrical</span><span class="p">()</span> <span class="k">for</span> <span class="n">vt</span> <span class="ow">in</span> <span class="n">A0</span><span class="p">))</span>
<span class="mi">2</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sage</span><span class="p">:</span> <span class="c1"># T1 was the genus 2 example in H(2)</span>
<span class="n">sage</span><span class="p">:</span> <span class="n">A1</span> <span class="o">=</span> <span class="n">CoreAutomaton</span><span class="p">(</span><span class="n">T1</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sage</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="n">A1</span><span class="o">.</span><span class="n">num_states</span><span class="p">(),</span> <span class="n">A1</span><span class="o">.</span><span class="n">num_transitions</span><span class="p">())</span>
<span class="mi">86</span> <span class="mi">300</span>
<span class="n">sage</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="n">vt</span><span class="o">.</span><span class="n">is_geometric</span><span class="p">()</span> <span class="k">for</span> <span class="n">vt</span> <span class="ow">in</span> <span class="n">A1</span><span class="p">))</span>
<span class="mi">54</span>
<span class="n">sage</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="n">vt</span><span class="o">.</span><span class="n">is_cylindrical</span><span class="p">()</span> <span class="k">for</span> <span class="n">vt</span> <span class="ow">in</span> <span class="n">A1</span><span class="p">))</span>
<span class="mi">24</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sage</span><span class="p">:</span> <span class="c1"># T2 was the genus 1 example in Q(1^2, -1^2)</span>
<span class="n">sage</span><span class="p">:</span> <span class="n">A2</span> <span class="o">=</span> <span class="n">CoreAutomaton</span><span class="p">(</span><span class="n">T2</span><span class="p">)</span>
<span class="n">sage</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="n">A2</span><span class="o">.</span><span class="n">num_states</span><span class="p">(),</span> <span class="n">A2</span><span class="o">.</span><span class="n">num_transitions</span><span class="p">())</span>
<span class="mi">1074</span> <span class="mi">3620</span>
<span class="n">sage</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="n">vt</span><span class="o">.</span><span class="n">is_geometric</span><span class="p">()</span> <span class="k">for</span> <span class="n">vt</span> <span class="ow">in</span> <span class="n">A2</span><span class="p">))</span>
<span class="mi">270</span>
<span class="n">sage</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="n">vt</span><span class="o">.</span><span class="n">is_cylindrical</span><span class="p">()</span> <span class="k">for</span> <span class="n">vt</span> <span class="ow">in</span> <span class="n">A2</span><span class="p">))</span>
<span class="mi">196</span>
</pre></div>
</div>
</section>
<section id="some-data-orientable-case">
<h2>Some data (orientable case)<a class="headerlink" href="#some-data-orientable-case" title="Permalink to this heading">¶</a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>component</p></th>
<th class="head"><p>dim</p></th>
<th class="head"><p>core</p></th>
<th class="head"><p>geometric</p></th>
<th class="head"><p>cylindrical</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>H(0)</p></td>
<td><p>2</p></td>
<td><p>2</p></td>
<td><p>2</p></td>
<td><p>2</p></td>
</tr>
<tr class="row-odd"><td><p>H(2)</p></td>
<td><p>4</p></td>
<td><p>86</p></td>
<td><p>54</p></td>
<td><p>24</p></td>
</tr>
<tr class="row-even"><td><p>H(1,1)</p></td>
<td><p>5</p></td>
<td><p>876</p></td>
<td><p>396</p></td>
<td><p>136</p></td>
</tr>
<tr class="row-odd"><td><p>H(4)^hyp</p></td>
<td><p>6</p></td>
<td><p>9116</p></td>
<td><p>2916</p></td>
<td><p>636</p></td>
</tr>
<tr class="row-even"><td><p>H(4)^odd</p></td>
<td><p>6</p></td>
<td><p>47552</p></td>
<td><p>35476</p></td>
<td><p>1970</p></td>
</tr>
<tr class="row-odd"><td><p>H(2,2)^hyp</p></td>
<td><p>7</p></td>
<td><p>111732</p></td>
<td><p>24192</p></td>
<td><p>3934</p></td>
</tr>
<tr class="row-even"><td><p>H(2,2)^odd</p></td>
<td><p>7</p></td>
<td><p>874750</p></td>
<td><p>711568</p></td>
<td><p>12740</p></td>
</tr>
<tr class="row-odd"><td><p>H(3,1)</p></td>
<td><p>7</p></td>
<td><p>2011366</p></td>
<td><p>1317136</p></td>
<td><p>33164</p></td>
</tr>
</tbody>
</table>
<p>To give an idea about the complexity and timings when generating the
above data, here are the steps involved. The timings are for the stratum
component H(4)^hyp that is the fourth row in the above array: -
generating the core graph ~20 secs for H(4)^hyp (the graph has 9116
vertices and 44664 edges) - filtering the geometric triangulations
(single test involves a polytope computation) ~20 secs for H(4)^hyp -
filtering cylindrical (single test is cheap) ~2 sec for H(4)^hyp</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sage</span><span class="p">:</span> <span class="n">H</span> <span class="o">=</span> <span class="n">AbelianStratum</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="o">.</span><span class="n">hyperelliptic_component</span><span class="p">()</span>  <span class="c1"># optional - surface_dynamics</span>
<span class="n">sage</span><span class="p">:</span> <span class="n">V</span> <span class="o">=</span> <span class="n">VeeringTriangulation</span><span class="o">.</span><span class="n">from_stratum</span><span class="p">(</span><span class="n">H</span><span class="p">)</span>         <span class="c1"># optional - surface_dynamics</span>
<span class="n">sage</span><span class="p">:</span> <span class="n">AV</span> <span class="o">=</span> <span class="n">CoreAutomaton</span><span class="p">(</span><span class="n">V</span><span class="p">)</span>                          <span class="c1"># long time - ~21 secs # optional - surface_dynamics</span>
<span class="n">sage</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="n">AV</span><span class="o">.</span><span class="n">num_states</span><span class="p">())</span>                         <span class="c1"># long time - ~150 µs # optional - surface_dynamics</span>
<span class="mi">9116</span>
<span class="n">sage</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="n">AV</span><span class="o">.</span><span class="n">num_geometric_triangulations</span><span class="p">())</span>       <span class="c1"># long time - ~21 secs # optional - surface_dynamics</span>
<span class="mi">2916</span>
<span class="n">sage</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="n">AV</span><span class="o">.</span><span class="n">num_cylindrical_triangulations</span><span class="p">())</span>     <span class="c1"># long time - ~1.5 secs # optional - surface_dynamics</span>
<span class="mi">636</span>
</pre></div>
</div>
</section>
<section id="license">
<h2>License<a class="headerlink" href="#license" title="Permalink to this heading">¶</a></h2>
<p>This document is published under the Creative Commons
<a class="reference external" href="https://creativecommons.org/licenses/by-sa/3.0/">CC BY-SA 3.0</a>.</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Veering triangulation demo</a><ul>
<li><a class="reference internal" href="#viewing-train-tracks">Viewing train-tracks!</a></li>
<li><a class="reference internal" href="#core-vs-not-core">Core vs not core</a></li>
<li><a class="reference internal" href="#geometric-polytope">Geometric polytope</a></li>
<li><a class="reference internal" href="#core-automaton">Core automaton</a></li>
<li><a class="reference internal" href="#some-data-orientable-case">Some data (orientable case)</a></li>
<li><a class="reference internal" href="#license">License</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="background.html"
                          title="previous chapter">Veering triangulations</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="ferenczi_zamboni.html"
                          title="next chapter">Ferenczi-Zamboni induction</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/veerer_demo.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="ferenczi_zamboni.html" title="Ferenczi-Zamboni induction"
             >next</a> |</li>
        <li class="right" >
          <a href="background.html" title="Veering triangulations"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">veerer  documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Veering triangulation demo</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018, Mark Bell, Vincent Delecroix, Saul Schleimer.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
    </div>
  </body>
</html>